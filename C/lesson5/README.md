# 概要と目的
- 配列について学ぶ

# 5-1.配列変数
## (1) 大量のデータを扱う場合の処理
前回までの内容でほぼC言語の基本的な概念が出てきました。しかしこれだけでは十分なプログラムができるわけではありません。実用的なプログラムを作るときに大事なことはたくさんありますが、特にここでは大量のデータを扱う場合について説明しましょう。

変数を用いて大量のデータを扱う場合、配列（はいれつ）を用いることができます。ここでは配列変数の使い方を学ぶことにしましょう。

## (2) 配列が有効なケース
配列について詳しく説明する前に、まずは以下のプログラムを実行してみてください。

```c
/* sample1.c */
#include <stdio.h>

int main(void) {
	double one,two,three;			//	変数の宣言
	double sum,avg;	//	合計値、平均値を入れる変数
	one = 1.2,two = 3.7,three = 4.1;	//	変数の代入
	printf("%lf %lf %lf\n",one,two,three);
	sum = one + two + three;	//	合計値の計算
	avg = sum / 3.0;			//	平均値の計算
	printf("合計値：%lf\n",sum);
	printf("平均値：%lf\n",avg);
    return 0;
}
```
```sh
# 実行結果
1.200000 3.700000 4.100000
合計値：9.000000
平均値：3.000000
```
このケースは数値が3つだからよいですが、もしももっと増えたらどうなるでしょう？four,five,…と次々に変数の数を増やしていかなくてはなりません。このように同じデータ型を複数個扱う場面では、変数だとプログラムが長くなってしまう場合があります。そこで有効な解決方法が配列を使う方法です。

## (3) 配列とは
配列とは同じデータ型のデータを任意の個数まとめて扱うことができる方法です。早速以下のプログラムを実行してみましょう。

```c
/* sample2.c */
#include <stdio.h>

int main(void) {
	// 宣言
	int a[3];
	
	// 代入
	a[0] = 5;
	a[1] = 6;
	a[2] = 7;
	
	// 参照
	printf("合計値：%d\n",a[0]+a[1]+a[2]);
	printf("平均値：%d\n",a[0]+a[1]+a[2]);
    
	return 0;
}
```

それではこのプログラムの解説をしていきます。


## (4) 宣言
配列変数を利用するには、まず配列の宣言が必要です。通常の変数が、変数の型と名前を決めるように、配列変数の宣言は変数の型と名前、そして配列の大きさを決めます。書式は次の通りです。
```c
変数の型 変数名[配列の大きさ];
```

サンプルプログラムの以下の部分で宣言しています。
```c
int a[3];
```
この場合、`a`が変数名になります。`[]`の中に記述されているのが、配列の大きさで、この場合、サイズは3になります。この処理により、`a[0]`、`a[1]`、`a[2]`という3つのint型の変数が使用可能になります。

では配列はどこに作成されるでしょうか？これは変数と同様にメモリ上に作成されます。ただし、変数と異なる点は、連続してメモリ領域を確保するという点です。

![配列](./_attachments/配列.drawio.svg)

## (5) 代入
```c
a[0] = 5;
a[1] = 6;
a[2] = 7;
```
`a[0]`, `a[1]`, `a[3]`に値を代入しています。`[]`の中に書いてある数字を添字（そえじ）と言います。例えば、「`a[1] = 5;`」という処理は、この配列の2番目の変数に、5という値を代入することを意味します。添え字は必ず0から始まりますので、配列の大きさが3の場合は、2までになります。

添字が、配列の範囲を超えていてもエラーにはなりませんが、実行時に異常終了したりすることがありますので、気をつけましょう。

## (6) 参照
```c
printf("合計値：%d\n",a[0]+a[1]+a[2]);
printf("平均値：%d\n",a[0]+a[1]+a[2]);
```
`a[0]`, `a[1]`, `a[3]`のようにすることで配列にアクセスることができます。

## (7) 配列の初期化
ところで、配列変数の宣言と初期化ですが、もう少し、楽にならないものなのでしょうか？実は、以下のようにすると、配列変数の宣言と初期化を一度に行うことができます。

```c
/* sample3.c */
#include <stdio.h>

int main(void) {
    // 初期化
	int a[] = { 5, 6, 7 };
	
	// 参照
	printf("合計値：%d\n",a[0]+a[1]+a[2]);
	printf("平均値：%d\n",a[0]+a[1]+a[2]);
    return 0;
}
```

配列の大きさを指定しなくても、`{}`の中の個数から、自動的に3と求めてくれます。そのため、以下のように4行で記述していたことが、1行で記述できます。
```c
int a[] = { 5, 6, 7 };
// この処理は、以下の処理に相当
int a[3];
a[0] = 5;
a[1] = 6;
a[2] = 7;
```

## (8) まとめ
sample1.cのプログラムを配列で書き直してみましょう。sample1.cでは、データの数が3個でしたが、せっかくなので10個にしてみましょう。

```c
/* sample4.c */
#include <stdio.h>

int main(void) {
	// サイズ10の配列変数の宣言
	double d[ ] = { 1.2, 3.7, 4.1, 6.2, 5.2, 9.7, 0.5, 4.5, 6.6, 3.3};
	double sum,avg;	//	合計値、平均値を入れる変数
	int i;

	sum = 0.0;
	for(i = 0; i < 10; i++){
		printf("%lf ",d[i]);
		sum += d[i];
	}
	printf("\n");

	avg = sum / 10.0;			//	平均値の計算
	printf("合計値：%lf\n",sum);
	printf("平均値：%lf\n",avg);
    return 0;
}
```

非常に簡潔なプログラムになりました。これで、データの個数が多くなっても修正箇所が少なくなりました。ここからも分かる通り、配列を使うメリットは、添え字に変数を使えることです。forループの中で、添字に整数型変数`i`を用いています。これにより、プログラムを変更して、配列の大きさを変化させても、for文に条件式の値を変化させるだけで対応できます。

# 5-2.多次元配列
## (1) ニ次元配列
最後に、配列変数の応用である、多次元配列（たじげんはいれつ）について説明しましょう。多次元配列とは、複数の添字をつけることができる配列変数です。そのなかで、最も基本となる二次元配列の例をここでは紹介します。

以下のプログラムを実行してみてください。

```c
/* sample5.c */
#include <stdio.h>

int main(void) {
	int a[3][4];
	int m,n;
	//	二次元配列に値を代入
	for(m = 0; m < 3; m++){
		for(n = 0; n < 4; n++){
			a[m][n] = m+n;
		}
	}
	//	成分の表示
	for(m = 0; m < 3; m++){
		for(n = 0; n < 4; n++){
			printf("%d ",a[m][n]);
		}
		printf("\n");
	}
    return 0;
}
```
```sh
# 実行結果
0 1 2 3
1 2 3 4
2 3 4 5
```

二次元配列`a`には、2つの添え字をつけることができます。これにより、二次元の配列を作ることが可能です。

![2次元配列](./_attachments/2次元配列.drawio.svg)

このプログラムでは、`i`、`j`の二重ループで`a[i][j]`に`i+j`が代入されます。（7～11行目）そのため、`a[0][0]=1`、`a[0][1]=1`､…、`a[1][2]=3`､…`a[2][3]=`5となります。

最後にこれを表示しています。（13～18行目）

二次元配列の理由範囲は非常に高く、さまざまな表や、座標などのデータを表すものとして使用されます。わかりやすい例でいくと、表計算のような処理は、二次元配列を用いれば、非常に簡単に実現できます。

理論的には、このようにして添字を増やすことにより、二次元、三次元・・・といった多次元の配列変数を作ることは可能です。しかし、実際用いられる多次元配列は、ほとんどがこの二次元配列です。

