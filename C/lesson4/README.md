# 概要と目的
- 繰り返し処理について学ぶ

# 4-1.C言語での繰り返し処理
## (1) アルゴリズムと繰り返し処理
コンピュータのプログラムの処理には、順次処理（じゅんじしょり）と分岐処理（ぶんきしょり）があることはすでに述べました。ここでは、もうひとつの処理、繰り返し処理について説明します。 コンピュータのプログラムのプログラムの処理のことを、一般にアルゴリズムと言いますが、アルゴリズムは、この3つの処理によって記述されています。

## (2) C言語の繰り返し処理
C言語では、繰り返し処理を記述するためにfor（フォー）文、while（ホワイル）文が用意されています。ここではそれらについて説明します。

# 4-2.for文
## (1) for文の基本
では、まず手始めに繰り返し処理の最も基本的な処理である、for（フォー）文について学んでいくことにしましょう。

for文は、`{}`で囲まれた処理を、指定した条件が満たされるまで繰り返す処理です。 繰り返し処理をループ処理ということから、for文による繰り返しを、forループとも呼びます。forループは、C言語のプログラムの中で最もよく使われる処理の一つです。しっかりと覚えておきましょう。まずは、以下のサンプルを実行してみてください。

```c
/* sample1.c */
#include <stdio.h>

int main(void) {
    int i;
    for(i = 1; i <= 5; i++){
        printf("%d ",i);
    }
    printf("\n"); 
    return 0;
}
```
```sh
# 実行結果
1 2 3 4 5
```

## (2) for文の書式
プログラムの結果をみると、for()文の`{}`に囲まれた部分が5回実行されたことが分かります。しかもiが1から5に1つづつ増加していたことはわかります。ではなぜこのような結果になるのでしょう。

それを知る前に、まずはfor文の書式をみてみましょう。

```c
for ( 初期化処理 ; 条件式 ; 増分処理 ){
    処理
}
```
これをsample1.cにあてはめてみましょう。

まず「`i = 1`」としていますから、最初は`i`の値は1から始まるわけです。

条件式はif文で用いられるものと同じもので、この場合「`i <= 5`」ですから、`i`が5以下の場合この処理は継続されるわけです。

では、増分処理には「`i++`」と書いてありますが、これは一体なんでしょうか？これは、インクリメントと言って、`i`の値を1増加させる処理なのです。

以上より、このfor文は、`i=1`から始めて、`i`を一つずつ増分させていき、`i`が5以下ならば`{}`内の処理を実行することを繰り返し、`i`が5より大きくなれば、ループから抜けるという処理になるのです。

## (3) インクリメント・デクリメント
for文では、このインクリメントおよび、デクリメントという処理をよく行います。デクリメントとは、インクリメントの反対で、変数の値を1減らす処理です。この処理を表にまとめると、以下のようになります。

| 演算子 | 呼び名         | 意味                    | 該当する演算 |
| :----- | :------------- | :---------------------- | :----------- |
| i++    | インクリメント | 変数の値を1増加させる。 | i=i+1;       |
| i--    | デクリメント   | 変数の値を1減少させる。 | i=i-1;       |

## (4) 様々なfor文の記述方法
これで、基本的なfor文の使い方がわかったことと思います。次に、これを用いて色々な記述方法を見てみましょう。sample1.cの5行目を、以下のように、様々な値に変えてみましょう。

| 記述方法                   | 実行結果    | 説明                                                 |
| :------------------------- | :---------- | :--------------------------------------------------- |
| for(i = 0 ; i < 5 ; i++)   | 0 1 2 3 4   | 変数の値を1増加させる。5になるとループを抜ける       |
| for(i = -2 ; i <= 2 ; i++) | -2 -1 0 1 2 | -2から2まで、値を1つずつ増加させる                   |
| for(i = 0 ; i < 10 ; i+=2) | 0 2 4 8     | 変数の値を2づつ増加させる。10になるとループを抜ける  |
| for(i = 5 ; i >= 1 ; i--)  | 5 4 3 2 1   | 5から1まで、値を1つずつ減少させる                    |
| for(i = 2 ; i >= -2 ; i--) | 2 1 0 -1 -2 | 2から-2まで、値を1つずつ減少させる                   |
| for(i = 12 ; i > 0 ; i-=3) | 12 9 6 3    | 変数の値を3づつ減少させる。0になると、ループを抜ける |

この例では、`int`の場合をとりあげましたが、その他のデータ型でもforループを利用することは可能です。

# 4-3.多重ループ
## (1) 多重ループとは何か
多重ループとは、繰り返し処理（ループ）構造の中に別の繰り返し構造が含まれているものです。ループの入れ子（ネスト）構造とも呼ばれます。多重ループはネストの数に応じて、二重ループ、三重ループ、・・・と呼ばれます。

多重ループは、行列の処理や2次元配列の操作など、複雑なデータ処理に活用されます。そのため、一番使用頻度が高いのが2重ループです。

## (2) forの二重ループ
実際にforの二重ループ、もしくはforのネストと呼ばれる処理を作ってみましょう。この処理はforループの中に更にforループを記述する二重の処理で、よく用いられるテクニックです。

```c
/* sample2.c */
#include <stdio.h>

//	forの二重ループ
int main(void) {
	int i,j;
	for(i = 1; i<= 2; i++){
		for(j = 1; j <= 3; j++){
			printf("%d+%d=%d  ",i,j,i+j);   // 繰り返される処理
		}
		printf("\n");
        return 0;
	}
}
```
```sh
# 実行結果
1+1=2 1+2=3 1+3=4
2+1=3 2+2=4 2+3=5
```

このプログラムではその側の変数`i`のループ（2回）が、内側の変数`j`のループ（3回）を繰り返しています。そのため2回×3回で、6回の表示処理のループが実現しています。

| 回数 | i   | j   | 表示内容 |
| :--- | :-- | :-- | :------- |
| 1    | 1   | 1   | 1+1=2    |
| 2    | 1   | 2   | 1+2=3    |
| 3    | 1   | 3   | 1+3=4    |
| 4    | 2   | 1   | 2+1=3    |
| 5    | 2   | 2   | 2+2=4    |
| 6    | 3   | 3   | 2+3=5    |

`i`が1の時､`j`のループで最初のループで1～2の内容が表示され、ループが終了すると改行（10行目）され、`i`が2になり、再び`j`のループが繰り返され、3～6の内容が表示されます。

# 4-3.while文
## (1) while文の基本
ループ処理を行うのは、for文だけではありません。while（ホワイル）文を用いることによっても実現可能です。まずは、以下のサンプルを見てください。

```c
/* sample3.c */
#include <stdio.h>

//	iを用いたループ
int main(void) {
   int i = 0;
   while(i <= 5){	
	   printf("%d ",i);
	   i++;
   }
   printf("\n");
   return 0;
}
```
```sh
# 実行結果
0 1 2 3 4 5
```

## (2) while文の書式
プログラムについて解説する前に、まずはwhile文の書式を見てみましょう。

```c
whlie(条件式）{
    処理
}
```
while文は、`()`内の条件が成り立つ間は、`{}`内に記述されている処理を繰り返します。

つまりsample3.cでは、`i<=5`という条件が成り立っている間は中の処理が繰り返されることを意味します。`()`内で記述する条件式の記述方法は、if文の場合と同様のものです。

5行目で、`i`を`0`で初期化していますから、この段階でwhile文の条件である、「`i<=5`」は偽ですから、ループ処理に入ります。ループ内で、`i`の値を表示すると共に、`i++`を行うことによって、`i`の値が増加しています。そのため、`i=6`となると、`i<=5`という命題は正しくない、つまり「偽」となります。ループから出ます。

| i   | 条件式 | 真／偽 |
| :-- | :----- | :----- |
| 1   | 1<=5   | 真     |
| 2   | 2<=5   | 真     |
| 3   | 3<=5   | 真     |
| 4   | 4<=5   | 真     |
| 5   | 5<=5   | 真     |
| 6   | 6<=5   | 偽     |

見てわかるとおり、このサンプルは、sample3.cと同等の処理です。しかし、for()文と違うのは、インクリメント・デクリメントといった処理や、初期値を設定する処理がループ内に存在しないことです。

# 4-4.ループの流れを変える
最後に、ループの流れを変える`break（ブレイク）`と`continue（コンティニュー）`の使い方を説明します。

## (1) break
まずは、ループを途中から抜ける`break`から説明しましょう。次のサンプルを実行してみてください。

```c
/* sample4.c */
#include <stdio.h>

//	breakでループを抜ける
int main(void) {
    int num;
	printf("負の値で、ループから抜けます。¥n");
	while(1){
		printf("数値を入力：");
		scanf("%d",&num);
		if(num < 0){
			//	ループから抜ける処理
			break;
		}
	}
	printf("終了\n");
    return 0;   
}
```
```sh
# 実行結果
数値を入力：9 ← 入力してEnterキーを押す
数値を入力：3 ← 入力してEnterキーを押す
数値を入力：42 ← 入力してEnterキーを押す
数値を入力：-1 ← 入力してEnterキーを押す
終了
```

プログラムを実行すると、「数値を入力：」と言う文字が出力され、コンソールからの数値の入力待ちになります。ここに様々な数値を入力していくことになります。ここに正の数を入れる限り、同じことが繰り返されます。しかし、負の数を入れると、「終了」と表示されて、プログラムが終了します。

`while(1)`とすると`{}`内の処理は無限に繰り返されます。これは、ifやwhileの条件式は、偽の場合は0、真の場合はそれ以外の値をとるからです。

`while(1)`とすることにより、`()`内の条件がつねに成り立っているのと同じ状態になり、処理が無限に繰り返されます。

ただこういったループでも、`break`があるとループから出ることができます。このサンプルでは、入力した値が負の値の場合、12行目の`break`でループから抜けることにより処理が終了します。

## (2) 無限ループ
一般に、際限なく繰り返されるループの事を無限ループと言います。

無限ループは、forでもできます。いずれも、`break`で出ることができます。ただ、無限ループにはこのサンプルのように故意に行うものと、意図せずにできるものがあります。

故意に用いる場合は、このプログラムのように、必要な箇所に`break`を入れて、ループから出ることができるようになります。 しかし、そうでない場合は、強制的にプログラムを終了させる必要がある場合もあります。

## (3) continue
`continue`はループの冒頭部分に戻る処理です。次のサンプルは`continue`を使ったサンプルです。

```c
/* sample5.c */
#include <stdio.h>

//	continueでループの先頭に戻る
int main(void) {
    int i;
    for(i = 1;i <= 5;i++){
        //  iが2の時にループの先頭に戻る
        if(i == 2){
            continue;
        }
        printf("%d ",i);
    }
    printf("\n");
    return 0;   
}
```
```sh
# 実行結果
1 3 4 5
```
これはsample1.cのforループに8~10行目の処理を追加したものです。

実行結果からわかる通り、「2」が表示されていません。これはiが2のときに9行目の`continue`でループの先頭に処理が戻るからです。

以上で、順次処理、分岐処理、繰り返し処理という、アルゴリズムの三大要素を記述する方法について説明しました。しかし、これだけではより複雑な実用プログラムを作るにはまだ不十分です。そこで、次からは、より複雑なプログラムを作るために必要な知識を身につけていくことにしましょう。