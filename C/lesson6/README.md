# 概要と目的
- 構造体について学ぶ
- 配列と構造体の違いについて学ぶ 

# 6-1.構造体
## (1) 構造体とは何か
例えば学校で学生のデータベースを作るとします。一人の学生の登録データが、学生番号、年齢、身長、体重であったとします。

そういったプログラムを作る時、関連する変数がバラバラになっていると、取扱が非常に不便です。そこで便利なのが、構造体（こうぞうたい）という概念です。構造体とは、複数の変数をひとまとめにするものです。

配列も複数のデータをまとめて扱いますが、配列は同じデータ型である必要があります。しかし構造体は異なるデータ型でも大丈夫です。

早速サンプルプログラムを実行してみましょう。

```c
/* sample1.c */
#include <stdio.h>
#include <string.h>

//	学生のデータを入れる構造体
typedef struct {
    int id;
	int age;
	double height;
	double weight;
} student_t;

int main(void){
    student_t data;
	data.id = 1;
	data.age = 18;
	data.height = 182.3;
	data.weight = 51.5;
	//	データの内訳を表示
	printf("学生番号:%d 年齢:%d 身長:%lf 体重:%lf\n", data.id, data.age, data.height, data.weight);
    return 0;
}
```

## (2) 宣言
先ほども述べた通り、構造体は異なるデータ型の変数をまとめて扱うことができます。この異なるデータ型の変数をまとめ、新しいデータ型を作ったものを構造体と考えると分かりやすいです。(正確には間違いです...)

構造体を使う場合は、まず新しいデータ型がどのようなものかを示す必要があり、このことを構造体を宣言すると言います。構造体が持つ変数をメンバ変数と言います。

下記が構造体の宣言方法です。`struct`が、構造体を表すキーワードであり、`typedef`を使うことで新しいデータ型名を付けています。
```c
typedef struct {
	データ型 メンバ変数名;
	データ型 メンバ変数名;
	データ型 メンバ変数名;
} 新しいデータ型名;
```

学生番号を表す整数型の変数`id`、年齢を表す整数型変数`age`、身長を表す実数型変数`height`、体重を表す`weight`を構造体として宣言すると以下のようになります。
```c
typedef struct {
    int id;
	int age;
	double height;
	double weight;
} student_t;
```

## (3) 定義
変数の定義は、`int a`などのように`データ型 変数名`でできました。構造体変数を定義する場合はデータ型を新しいデータ型に変更することでできます。

```c
新しいデータ型名 構造体変数名
```

今回は、`student_t`が新しいデータ型のため、`データ型`の部分を`student_t`に置き換えるだけで定義できます。

```c
student_t data;
```

![構造体](./_attachments/構造体.drawio.svg)

## (2) 代入と参照
構造体変数のメンバには`.`を使いアクセスすることができます。
```c
構造体変数名.メンバ
```

サンプルでは、構造体変数はdataなので、そのメンバ`id`へのアクセスは、間に"."(ピリオド)をつけて、`data.id`とします。このサンプルでは、13～15行目で、それぞれの成分に値を代入しています。先頭に`data.`がついているだけで、それぞれの成分へのアクセスは、普通の変数とは変わりません。

```c
data.id = 1;
data.age = 18;
data.height = 182.3;
data.weight = 51.5;
//	データの内訳を表示
printf("学生番号:%d 年齢:%d 身長:%lf 体重:%lf\n", data.id, data.age, data.height, data.weight);
```

# 6-2.構造体配列
## (1) 複数の構造体データを扱う場合
冒頭で述べたような学生データベースを作成する場合、複数の学生データを扱う必要があります。そのような場合には構造体の配列を利用する必要があります。では、構造体の配列とはどのように定義すればよいのでしょうか。

そこで次は、構造体を配列にして使用する例を紹介します。以下のプログラムを実行してみてください。

```c
/* sample2.c */
#include <stdio.h>
#include <string.h>

//	学生のデータを入れる構造体
typedef struct {
    int id;
	int age;
	double height;
	double weight;
} student_t;

int main(void) {
	int i;
	student_t data[] = {
		{ 1, ,18, 152.3, 42.3 },
		{ 2, ,18, 136.7, 52.4 },
		{ 3, ,18, 122.3, 42.5 },
		{ 4, ,19, 162.3, 55.8 },
	};

	for(i = 0; i < 4; i++){
		printf("学生番号:%d 年齢:%d 身長:%lf 体重:%lf\n", data[i].id, data[i].age, data[i].height, data[i].weight);
	}
    return 0;
}
```

このように構造体も変数と同じように扱うことができます。
