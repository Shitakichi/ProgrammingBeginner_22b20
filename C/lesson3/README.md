# 概要と目的
- 分岐処理について学ぶ
- `scanf()`関数について学ぶ

# 3-1.分岐処理
## (1) 順次処理
変数や`printf()`を用いれば、ある程度基本的な計算や画面への出力が出来ます。

しかし、プログラムとしてはいまひとつ物足りないというのも事実です。これまでやってきた処理はプログラム中に記述された様々な処理をその順番とおり実行するだけのものでした。こういった処理を順次処理（じゅんじしょり）と言います。

## (2) 分岐処理
しかし、プログラムは、順次処理だけでは出来上がりません。様々な状況に応じて、違った処理を行わなくてはなりません。例えばゲームプログラムを作っているとしたら「もし、敵に当たったらゲームオーバー」など といったような、条件に応じた処理の分岐が必要になります。こういったように、ある条件で処理の流れが変わる処理を、分岐処理（ぶんきしょり）と言います。

C言語では分岐処理を記述するための命令としてif(イフ)文という命令が用意されています。

# 3-2.if文
## (1) if文の基本
では、まず手始めに条件分岐の最も基本的な処理である、if文について学んでいくことにしましょう。ifとは、英語で、「もしも」という意味を表す単語で、「もしも～だったら、…する」といった処理を行うために用います。まずは、以下のプログラムを実行してみてください。

```c
/* sample1.c */
#include <stdio.h>

int main(void){
	int a;
	printf("数値を入力：");
	//	キーボードから整数を入力
	scanf("%d",&a);
	//	入力した値が、正の数かどうかを調べる
	if(a > 0){
		printf("入力した値は正の数です。\n");	//	正の数だった場合に実行
	}
    return 0;
}
```

プログラムを実行すると、コンソール画面に「数値を入力：」と表示され、横にカーソルが出てキーボードからの入力モードに移行するはずです。まずここでキーボードから正の数を入力してみましょう。

```sh
# 実行結果
数値を入力：5 # キーボードから数値を入力しEnterキーを押す。
入力した値は正の数です。
```
すると上のように「入力した値は、正の数です。」と表示されプログラムが終わります。また、同じプログラムでも`0`もしくは負の数を入力すると次のように何も表示されません。

```sh
# 実行結果
数値を入力：-1 # キーボードから数値を入力しEnterキーを押す。
```
実際に、何度か正の数や負の数を入力して試して見ましょう。

## (2) scanf関数
では、一体、このプログラムはどのような仕組みになっているのでしょう。順を追って説明していきましょう。まず、5行目に出てくる以下の`scanf()`関数からみてみましょう。

```c
scanf("%d",&a);
```
`scanf()`関数は、キーボードから文字列を入力する際に用いる関数です。

整数型変数`a`に値を入れるには、先頭に`&(アンパサント)`をつけ、`"`で囲まれた部分には、`%d`と記入します。 どうしてこのような記述の方法になるかは、ポインタとアドレスに関する知識が必要なので、ここではそのようなものだと思って使ってください。

## (3) if文の書式
次に、条件分岐で用いる、if文の書式について説明します。if文は、次のような書式になっています。

```c
if(条件式){
    処理
}
```
`()`内の条件式が成立した時、`{}`に囲まれた処理を実行するのがif文です。

`sample1.c`では、`a>0`、つまり`a`が`0`よりも大きい時に条件が成立し、`{}`内の`printf()`文が実行されるわけです。「`>`」は比較演算子（ひかくえんざんし）と言います。比較演算子は、以下のようなものがあります。

| 演算子 | 意味       | 使用例 |
| :----- | :--------- | :----- |
| >      | より大きい | a > 0  |
| >=     | 以上       | a >= 0 |
| <      | より小さい | a > 0  |
| <=     | 以下       | a <= 0 |
| ==     | 等しい     | a == 0 |
| !=     | 等しくない | a != 0 |

以上よりこのプログラムが、キーボードから入力された数値が正の整数のときは「入力した値は、正の数です。」と表示され、そうでない場合は何も表示されないのです。

ただ、出来ることならば正の数以外の値が入力された時にも何らかのメッセージを表示したいものです。そこで次はそれをできる仕組みを紹介しましょう。

# 3-3.if～else文
## (1) if文の条件がなりたたなかった場合
if文はある条件が成り立た場合の処理を記述することはできますが、成り立たない場合にも処理をしたい場合どうすればよいのでしょうか。その時に便利なのがif～else文です。

```c
/* sample2.c */
#include <stdio.h>

int main(void){
	int a;
	printf("数値を入力：");
	//	キーボードから整数を入力
	scanf("%d",&a);

	//	入力した値が、正の数かどうかを調べる
	if(a > 0){
		printf("入力した値は、正の数です。\n");	//	正の数だった場合に実行
	}else{
		printf("入力した値は、正の数ではありません。\n");	//	0か負の数だった場合に実行
	}
    return 0;
}
```

このプログラムの実行結果は、実行後正の整数を入力した場合は変わりません。しかし、負の数を入力した場合は、以下のような実行結果になります。

```sh
# 実行結果
数値を入力：-1 ← キーボードから数値を入力しEnterキーを押す。
入力した値は、正の数ではありません。
```

## (2) else
ここで出現した、if～else文は、以下のような書式になっています。

```c
if(条件式){
    処理1
}else{
    処理2
}
```
if文の`()`内の条件式が満たされた時には、処理1が実行されるのは、if文単体の時と変わりません。

しかしそれ以外の場合、つまり条件式が満たされなかった場合は、else（エルス）文以下の処理2が実行されます。

したがってこのプログラムは、`a`が正の整数ではない、つまり`0`か負の値であるのならば、「入力した値は、正の数ではありません。」と出力されるのです。

# 3-4.else if
ifとelseを用いた場合、ある条件が成り立つ場合と、そうでない場合の処理が書けました。しかし、実際には、条件が複数から成る場合も多く存在します。そういう時はどのようにすればよいのでしょうか？

その時に役に立つのが、else if(エルスイフ)です。まずは、以下のサンプルを実行してみましょう。

```c
/* sample3.c */
#include <stdio.h>

int main(void){
    int num;
    printf("1～3の値を入力してください：");
    //  キーボードから整数を入力
    scanf("%d",&num);

    //  入力した値が、正の数かどうかを調べる
    if(num == 1){
        printf("one\n");  	//  numが1だった場合の処理
    }else if(num == 2){
		printf("two\n");	//  numが2だった場合の処理 
	}else if(num == 3){
		printf("three\n");	//  numが3だった場合の処理 
	}else{
		printf("不適切な値です。\n"); //  それ以外の値が入力された場合の処理
	}
    return 0;
}
```
このプログラムの実行結果は、実行後正の整数を入力した場合は変わりません。しかし、負の数を入力した場合は、以下のような実行結果になります。

```sh
# 実行結果
1～3の値を入力してください：1 # キーボードから数値を入力しEnterキーを押す。
one
```
```sh
# 実行結果
1～3の値を入力してください：4 # キーボードから数値を入力しEnterキーを押す。
不適切な値です。
```
実行した結果、1を入力すれば「one」、2を入力すれば「two」、3を入力すれば「three」と表示されることが分かります。

それ以外の値を入力すれば「1～3の値を入力してください」と表示されます。

`if`と`else`だけでは一つの条件が成り立った時とそれ以外の場合の処理しか実行できませんが、`else if`を用いれば、複数の条件の場合についての場合分けが可能です。`else if`を含むif文の書式は以下の通りになっています。

```c
if(条件式1){
    処理1
}else if(条件式2){
    処理2
}else{
    処理3
}
```
条件式1が成り立てば処理1が、条件式2が成り立てば処理2が実行され、そのどちらの条件も成り立たなければ、処理3が実行されます。なお、`else if`は、`if`の後に何個でも追加することができます。なので、いくつでも条件を追加することが可能です。

# 3-3.複雑なif文
つぎは、if文の知識を組みあわせて、更に複雑なifの構文を作り上げてみましょう。

## (1) if文の様々な使い方
次のサンプルを入力して実行してみてください。

```c
/* sample4.c */
#include <stdio.h>

int main(void){
	int dice;
	//	サイコロの目を入力
	printf("1から6の数値を入力してください:");
	scanf("%d",&dice);
	//	値が、サイコロの目の範囲内かどうかを調べる
	if(1 <= dice && dice <= 6){
		//	さいころの目が、偶数か、奇数かで、処理を分ける。
		if(dice == 2 || dice == 4 || dice == 6){
			printf("丁（チョウ）です。\n");	//	偶数ならば丁（チョウ）
		}else{
			printf("半（ハン）です。\n");	//	奇数ならば半（ハン）
		}
	}else{
		printf("範囲外の数値です。\n");
	}
    return 0;
}
```

このプログラムの実行結果は、大きく分けて3通りに分けられます。まず一つ目が、`1`から`6`の間の偶数、つまり、`2`，`4`，`6`といった値を入力した場合です。 以下のように、「丁（チョウ）です。」と表示され、プログラムは終了します。
```sh
# 実行結果
1から6の数値を入力してください：2 # キーボードから数値を入力しEnterキーを押す。
丁（チョウ）です。
```

次に、同じく1から6の間で、今度は、1，3，5といった奇数を入力すると、「半（ハン）です。」と表示され、プログラムは終了します。
```sh
# 実行結果
1から6の数値を入力してください：5 # キーボードから数値を入力しEnterキーを押す。
半（チョウ）です。
```

最後に、1から6以外の整数、つまりさいころの目に該当しないような数値を入れると、「範囲外の数値です。」と表示されて、プログラムが終了します。
```sh
# 実行結果
1から6の数値を入力してください：10 # キーボードから数値を入力しEnterキーを押す。
範囲外の数値です。
```

## (2) if文のネスト
このプログラムを見ると、if文の中に更にif文が入っています。これをif文のネストと言います。

ネストとは入れ子構造のことで、if文に限ったことではなくこの後紹介する繰り返し処理などでもしばしば見られる書式です。「何かの処理の中に、さらに何かの処理が入っているのがネストである」と理解すると良いでしょう。

```c
if(条件式1){
    if(条件式2){
        処理
    }
}
```
条件式1が成り立っているとき、さらに条件式2が成り立てば処理が実行されます。

仮に条件式1が成り立っていても条件式2が成り立たなければ処理は実行されません。また、条件式1が成り立たなければ中のif文も実行されません。

このようにif文はネストが可能ですが、三重以上にネストをすることも可能です。ただあまりネストを多用するとプログラムが複雑になり、わかりずらくなるので気をつけましょう。

## (3) 論理演算子
また、次に注目したいのが9行目と11行目のif文の中身です。ここでは||や、&&が間に挟まって、複数の条件式が出ています。

これらの記号は、論理演算子（ろんりえんざんし）と言い、if文などで複数の条件を調べるときには欠かせないものです。なお、C言語で用いられる論理演算子は、以下のとおりです。

| 演算子 | 名称                 | 使用例                                   |
| :----- | :------------------- | :--------------------------------------- |
| &&     | 論理積（ろんりせき） | a == 0 && b == 0 // aが0かつ、bが0ならば |
| \|\|   | 論理和（ろんりわ）   | a == 0 \|\| a == 1 // aが0か1ならば      |
| !      | 否定（ひてい）       | !(a == 0) // a==0でない場合、真となる    |

例えば、`&&`は複数の条件がすべて成り立っていることが必要となります。
